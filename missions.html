<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FayWooooo 官方網站</title>
  <link rel="stylesheet" href="css/style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/js/all.min.js"></script>
</head>
<body>
  <header class="topbar">
    <div class="logo"><i class="fa-solid fa-list-check"></i> 任務中心</div>
    <nav class="navbar">
      <a href="index.html"><i class="fa-solid fa-house"></i> 首頁</a>
    </nav>
  </header>

  <main>
    <h2><i class="fa-solid fa-clipboard-list"></i> 今日任務</h2>
    <div id="missionList"></div>
  </main>

  <footer>© FayWooooo</footer>

  <script>
  fetch("https://ugasavvuxllkpkkdxvpv.supabase.co/functions/v1/missions")
    .then(r => r.json())
    .then(data => {
      const list = document.getElementById("missionList");
      list.innerHTML = data.map(m => `
        <div class="card">
          <h3><i class="fa-solid fa-bullseye"></i> ${m.title}</h3>
          <p>${m.desc}</p>
          <button class="main-btn" onclick="complete('${m.id}')">
            <i class="fa-solid fa-check"></i> 完成 (+${m.reward} Fay幣)
          </button>
        </div>
      `).join("");
    });

  function complete(id) {
    fetch("https://ugasavvuxllkpkkdxvpv.supabase.co/functions/v1/missions",
      { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ mission_id: id }) }
    ).then(() => alert("✅ 任務完成！"));
  }
  </script>
</body>
</html>
